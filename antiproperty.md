# アンチプロパティ
適切な言葉が見つからない...

CSS のアンチパターンで、「打ち消しプロパティを多用する」というものがあります。CSS はプロパティの積み上げなので、打ち消しが多ければ多いほど分かりにくくなります。分かりにくいだけならばいいですが、それが CSS が壊れることにつながります。

先ほどの投稿の表示で、レスポンシブ対応を行ってみます。

* 幅が 768px 以上はパソコン、それ未満をスマフォ
* パソコンでは三つ横に並べる、スマフォでは縦に並べる

```css
.post-group:before, .post-group:after {
  content: "";
  clear: both;
  content: block;
}

.post-item {
  float: left;
  width: 33%;
}

.post-item-content {
  border: solid gray 1px;
  margin: 0.2rem; /* 枠線が引っ付かないように... */
}

// スマフォ対応
@media (max-width: 767px) {
  .post-item {
    float: none;
    width: 100%;
  }
}
```

これでうまくいきました!

でも、これも CSS が破壊されます。

試しに「パソコンでは枠線を丸める」仕様を追加します。

```css
.post-item-content {
  border: solid gray 1px;
  borde-radius: 0.5rem;
  margin: 0.2rem; /* 枠線が引っ付かないように... */
}
```

当然ですが、これによってスマフォ版も枠線が丸くなってしまいますので、しょうがなく対策を打ちます。

```css
@media (max-width: 767px) {
  .post-item-content {
    border-radius: 0;
  }
}
```

いわゆるアンチプロパティです。これを繰り返すと、どのプロパティが適用されているのかが分かりにくくなり、その場しのぎの修正が増え、結果として CSS が壊れます。

アンチプロパティ自体にはそこまで大きな問題はないのですが、アンチプロパティを使わなければいけなくなる状況こそが問題となります。

```
+-------------------+
|      PC style     | <-- <1> Add border radius
+-------------------+
         ^
         |
+-------------------+
| Smart Phone style | <-- <2> Affected! (NG)
+-------------------+
```

以下に示すように、共通の部分とそれぞれの部分にきちんと分ける必要があります。

```
       +------------------------------------------------------+
       |                     Common Style                     |
       +------------------------------------------------------+
         ^                                                  ^
         |                                                  |
+-------------------+                            +-------------------+
|      PC style     | <-- <1> Add border radius  | Smart Phone style | <-- <2> Not Affected! (OK)
+-------------------+                            +-------------------+
```

実際に CSS で書くとこんな感じです。

```css
// 共通のところ
.post-item-content {
  border: solid gray 1px;
  margin: 0.2rem; /* 枠線が引っ付かないように... */
}

// スマフォ対応
@media (max-width: 767px) {
  .post-item {
    width: 100%;
  }
}

// パソコン対応
@media (min-width: 768px) {
  .post-group:before, .post-group:after {
    content: "";
    clear: both;
    content: block;
  }

  .post-item {
    float: left;
    width: 33%;
  }
}
```

結論として、アンチパターンが使われる場合は依存がおかしくないか注意して下さい。今回はレスポンシブ対応の例をあげましたが、他についても似たようなことがおきます。

投稿の表示で、一覧のサマリタイプと全てを表示する詳細タイプの二種類がある場合でも、同様に以下のような状態にしないと、アンチプロパティが増え、結果として壊れます。

```
     +---------------------------------+
     |         Post common style       |
     +---------------------------------+
       ^                             ^
       |                             |
+--------------------+  +-------------------+
| Post summary style |  | Post detail style |
+--------------------+  +-------------------+
```
